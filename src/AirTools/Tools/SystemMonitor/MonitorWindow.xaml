<Window x:Class="AirTools.Tools.SystemMonitor.MonitorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="系统资源监控"
        Width="Auto" SizeToContent="WidthAndHeight"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        MouseLeftButtonDown="Window_MouseLeftButtonDown"
        MouseRightButtonUp="Window_MouseRightButtonUp"
        Loaded="Window_Loaded"
        Closing="Window_Closing">

    <Window.Resources>
        <SolidColorBrush x:Key="MonitorBg" Color="#CC282828"/>
        <SolidColorBrush x:Key="MonitorBorder" Color="#404040"/>
        <SolidColorBrush x:Key="MonitorCpuColor" Color="#96FF96"/>
        <SolidColorBrush x:Key="MonitorMemColor" Color="#9696FF"/>
        <SolidColorBrush x:Key="MonitorDiskColor" Color="#FFC896"/>
        <SolidColorBrush x:Key="MonitorNetColor" Color="#FFC896"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#A6ADC8"/>
        
        <ContextMenu x:Key="MonitorContextMenu">
            <MenuItem Header="设置" Click="MenuItem_Settings_Click"/>
            <MenuItem Header="关闭" Click="MenuItem_Close_Click"/>
        </ContextMenu>
    </Window.Resources>

    <Border x:Name="MainBorder" Background="{DynamicResource MonitorBg}" BorderBrush="{DynamicResource MonitorBorder}" BorderThickness="1" CornerRadius="4" Padding="6,4"
            ContextMenu="{StaticResource MonitorContextMenu}">
        <Grid>
            <!-- Vertical Layout -->
            <StackPanel x:Name="PanelVertical" Visibility="Collapsed" Width="80">
                <!-- CPU -->
                <Grid x:Name="GridCpuV" Margin="0,0,0,6">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="CPU" Foreground="{DynamicResource TextSecondary}" FontSize="10" VerticalAlignment="Center" Width="28"/>
                    <TextBlock x:Name="TxtCpuV" Grid.Column="1" Text="100%" Foreground="{DynamicResource MonitorCpuColor}" FontSize="11" FontWeight="SemiBold" HorizontalAlignment="Right" Width="35"/>
                    <Rectangle x:Name="CpuLineV" Grid.Column="2" Width="2" Height="12" Fill="{DynamicResource MonitorCpuColor}" Opacity="0" VerticalAlignment="Center" Margin="4,0,0,0"/>
                </Grid>

                <!-- RAM -->
                <Grid x:Name="GridMemV" Margin="0,0,0,6">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="RAM" Foreground="{DynamicResource TextSecondary}" FontSize="10" VerticalAlignment="Center" Width="28"/>
                    <TextBlock x:Name="TxtMemV" Grid.Column="1" Text="100%" Foreground="{DynamicResource MonitorMemColor}" FontSize="11" FontWeight="SemiBold" HorizontalAlignment="Right" Width="35"/>
                    <Rectangle x:Name="MemLineV" Grid.Column="2" Width="2" Height="12" Fill="{DynamicResource MonitorMemColor}" Opacity="0" VerticalAlignment="Center" Margin="4,0,0,0"/>
                </Grid>

                <!-- DISK -->
                <Grid x:Name="GridDiskV" Margin="0,0,0,6">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Disk" Foreground="{DynamicResource TextSecondary}" FontSize="10" VerticalAlignment="Center" Width="28"/>
                    <TextBlock x:Name="TxtDiskV" Grid.Column="1" Text="999M" Foreground="{DynamicResource MonitorDiskColor}" FontSize="11" FontWeight="SemiBold" HorizontalAlignment="Right" Width="35" FontFamily="Consolas"/>
                    <Rectangle x:Name="DiskLineV" Grid.Column="2" Width="2" Height="12" Fill="{DynamicResource MonitorDiskColor}" Opacity="0.3" VerticalAlignment="Center" Margin="4,0,0,0"/>
                </Grid>

                <!-- NET -->
                <StackPanel x:Name="PanelNetV">
                    <TextBlock Text="Net" Foreground="{DynamicResource TextSecondary}" FontSize="10" Margin="0,0,0,4"/>
                    <Grid Margin="0,0,0,4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="↑" Foreground="{DynamicResource TextSecondary}" FontSize="10" VerticalAlignment="Center" Width="28"/>
                        <TextBlock x:Name="TxtNetUpV" Grid.Column="1" Text="999M" Foreground="{DynamicResource MonitorNetColor}" FontSize="11" FontWeight="SemiBold" HorizontalAlignment="Right" Width="35" FontFamily="Consolas"/>
                        <Rectangle x:Name="NetUpLineV" Grid.Column="2" Width="2" Height="12" Fill="{DynamicResource MonitorNetColor}" Opacity="0.3" VerticalAlignment="Center" Margin="4,0,0,0"/>
                    </Grid>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="↓" Foreground="{DynamicResource TextSecondary}" FontSize="10" VerticalAlignment="Center" Width="28"/>
                        <TextBlock x:Name="TxtNetDownV" Grid.Column="1" Text="999M" Foreground="{DynamicResource MonitorNetColor}" FontSize="11" FontWeight="SemiBold" HorizontalAlignment="Right" Width="35" FontFamily="Consolas"/>
                        <Rectangle x:Name="NetDownLineV" Grid.Column="2" Width="2" Height="12" Fill="{DynamicResource MonitorNetColor}" Opacity="0.3" VerticalAlignment="Center" Margin="4,0,0,0"/>
                    </Grid>
                </StackPanel>
            </StackPanel>

            <!-- Horizontal Layout -->
            <StackPanel x:Name="PanelHorizontal" Orientation="Horizontal" Visibility="Visible">
                <!-- CPU -->
                <StackPanel x:Name="GridCpuH" Margin="0,0,10,0" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="CPU" Foreground="{DynamicResource TextSecondary}" FontSize="10" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <TextBlock x:Name="TxtCpuH" Text="100%" Foreground="{DynamicResource MonitorCpuColor}" FontSize="11" FontWeight="SemiBold" VerticalAlignment="Center" Width="35" TextAlignment="Right"/>
                    </StackPanel>
                </StackPanel>

                <!-- RAM -->
                <StackPanel x:Name="GridMemH" Margin="0,0,10,0" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="RAM" Foreground="{DynamicResource TextSecondary}" FontSize="10" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <TextBlock x:Name="TxtMemH" Text="100%" Foreground="{DynamicResource MonitorMemColor}" FontSize="11" FontWeight="SemiBold" VerticalAlignment="Center" Width="35" TextAlignment="Right"/>
                    </StackPanel>
                </StackPanel>

                <!-- DISK -->
                <StackPanel x:Name="GridDiskH" Margin="0,0,10,0" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Disk" Foreground="{DynamicResource TextSecondary}" FontSize="10" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <TextBlock x:Name="TxtDiskH" Text="999M" Foreground="{DynamicResource MonitorDiskColor}" FontSize="11" FontWeight="SemiBold" VerticalAlignment="Center" FontFamily="Consolas" Width="36" TextAlignment="Right"/>
                    </StackPanel>
                    <Rectangle x:Name="DiskLineH" Width="30" Height="2" Fill="{DynamicResource MonitorDiskColor}" Opacity="0.3" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                </StackPanel>

                <!-- NET -->
                <StackPanel x:Name="PanelNetH" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Net" Foreground="{DynamicResource TextSecondary}" FontSize="10" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <StackPanel Margin="0,0,6,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="↑" Foreground="{DynamicResource TextSecondary}" FontSize="10" VerticalAlignment="Center" Margin="0,0,2,0"/>
                                <TextBlock x:Name="TxtNetUpH" Text="999M" Foreground="{DynamicResource MonitorNetColor}" FontSize="11" FontWeight="SemiBold" VerticalAlignment="Center" FontFamily="Consolas" Width="36" TextAlignment="Right"/>
                            </StackPanel>
                            <Rectangle x:Name="NetUpLineH" Width="30" Height="2" Fill="{DynamicResource MonitorNetColor}" Opacity="0.3" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                        </StackPanel>
                        <StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="↓" Foreground="{DynamicResource TextSecondary}" FontSize="10" VerticalAlignment="Center" Margin="0,0,2,0"/>
                                <TextBlock x:Name="TxtNetDownH" Text="999M" Foreground="{DynamicResource MonitorNetColor}" FontSize="11" FontWeight="SemiBold" VerticalAlignment="Center" FontFamily="Consolas" Width="36" TextAlignment="Right"/>
                            </StackPanel>
                            <Rectangle x:Name="NetDownLineH" Width="30" Height="2" Fill="{DynamicResource MonitorNetColor}" Opacity="0.3" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </Grid>
    </Border>
</Window>
